<script type="text/javascript">
  $( document ).ready(function() {
  $('#geobutton').on('click', function () {
    geoFindMe();
  })
  });

function geoFindMe() {

  if (!navigator.geolocation){
    alert("Sorry, finding your location is not supported by your browser");
    $('#geobutton').attr("disabled", true)
    return;
  }

  function success(position) {
    var latitude  = position.coords.latitude;
    var longitude = position.coords.longitude;
    var text = longitude + ',' + latitude;
    $("#near").val(text)
  }

  function error() {
    alert("Sorry, we are unable to get your location");
  }

  $("#near").val("Locatingâ€¦")

  navigator.geolocation.getCurrentPosition(success, error);
}
</script>
<div id="out"></div>
<%= form_tag("/courses", method: "get", class: 'form-horizontal ', role: 'form') do %>
  <div class="form-group add-on">
    <%= label_tag(:q, "Find", class:"col-sm-2 control-label") %>
    <div class="col-sm-8">
      <div class="input-group">
        <%= text_field_tag(:q, params[:q], class:"form-control", placeholder: "Courses, Subjects, Topics") %>
        <div class="input-group-btn">
        <button class="btn btn-default" type="submit" title="Search"><i class="glyphicon glyphicon-search"></i></button>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group  add-on">
    <%= label_tag(:near, "Near", class:"col-sm-2 control-label") %>
    <div class="col-sm-8">
      <div class="input-group">
        <%= text_field_tag(:near, params[:near], class:"form-control", placeholder: "Postcode or place") %>
        <%= hidden_field_tag(:sort, params[:sort]) %>
        <div class="input-group-btn">
          <button id="geobutton" class="btn btn-default" type="button" title="Find Your Location"><i class="glyphicon glyphicon-globe" ></i></button>
        </div>
      </div>
    </div>
</div>


<% end %>



